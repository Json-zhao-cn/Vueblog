import{_ as s,c as a,a as e,o as t}from"./app-7xvXnEYb.js";const l={};function i(o,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h3 id="deep-introduction-to-filebeat-in-the-elk" tabindex="-1"><a class="header-anchor" href="#deep-introduction-to-filebeat-in-the-elk"><span><strong>Deep Introduction to Filebeat in the ELK</strong></span></a></h3><p><strong>Filebeat</strong> is a lightweight, open-source log shipper from the <strong>Elastic Stack (ELK)</strong> designed to forward and centralize log data. It is optimized for efficiently reading log files and sending data to Elasticsearch, Logstash, or any supported output. Filebeat minimizes resource usage and integrates seamlessly with other Elastic components.</p><h3 id="key-features-of-filebeat" tabindex="-1"><a class="header-anchor" href="#key-features-of-filebeat"><span><strong>Key Features of Filebeat</strong></span></a></h3><ol><li><p><strong>Lightweight and Efficient</strong>:</p><ul><li>Consumes minimal system resources, making it ideal for deploying on application servers, containers, or lightweight environments.</li></ul></li><li><p><strong>Modular Design</strong>:</p><ul><li>Prebuilt modules for popular log sources (e.g., Nginx, Apache, Kubernetes, AWS CloudWatch) simplify configuration.</li></ul></li><li><p><strong>Multiline Log Handling</strong>:</p><ul><li>Handles multiline log entries (e.g., Java stack traces) by combining related lines into a single event.</li></ul></li><li><p><strong>Resilient and Fault-Tolerant</strong>:</p><ul><li>Tracks log processing using a registry file, ensuring no data is lost even after a restart.</li></ul></li><li><p><strong>Flexible Output Options</strong>:</p><ul><li>Can send logs directly to <strong>Elasticsearch</strong>, <strong>Logstash</strong>, or other destinations like Kafka.</li></ul></li><li><p><strong>Autodiscover for Containers</strong>:</p><ul><li>Dynamically adapts to containerized environments such as Docker and Kubernetes.</li></ul></li><li><p><strong>Secure Data Transmission</strong>:</p><ul><li>Supports TLS encryption and authentication for secure communication.</li></ul></li></ol><hr><h3 id="how-filebeat-fits-into-the-elk-pipeline" tabindex="-1"><a class="header-anchor" href="#how-filebeat-fits-into-the-elk-pipeline"><span><strong>How Filebeat Fits into the ELK Pipeline</strong></span></a></h3><ul><li><strong>Input</strong>: Filebeat collects logs from log files, system logs, container logs, or cloud service logs.</li><li><strong>Processing</strong>: Preprocesses data (optional) using modules or custom processors.</li><li><strong>Output</strong>: Sends processed logs to Elasticsearch or Logstash for further analysis and storage.</li></ul><hr><h3 id="key-components-of-filebeat" tabindex="-1"><a class="header-anchor" href="#key-components-of-filebeat"><span><strong>Key Components of Filebeat</strong></span></a></h3><ol><li><p><strong>Inputs</strong>:</p><ul><li>Define where and how logs are collected.</li><li>Common input types: <ul><li><code>log</code>: Reads log files line by line.</li><li><code>stdin</code>: Captures logs from standard input streams.</li></ul></li></ul></li><li><p><strong>Processors</strong>:</p><ul><li>Perform lightweight data transformations before forwarding logs.</li><li>Examples: adding fields, removing fields, or filtering events.</li></ul></li><li><p><strong>Outputs</strong>:</p><ul><li>Define the destination for logs.</li><li>Supported outputs: <ul><li>Elasticsearch (default)</li><li>Logstash</li><li>Kafka</li><li>Redis</li></ul></li></ul></li><li><p><strong>Modules</strong>:</p><ul><li>Predefined configurations for popular services and platforms, e.g., MySQL, Nginx, and AWS.</li></ul></li><li><p><strong>Autodiscover</strong>:</p><ul><li>Dynamically adjusts configurations based on container or service metadata.</li></ul></li><li><p><strong>Registry File</strong>:</p><ul><li>Tracks the read position in log files to prevent duplicate processing.</li></ul></li></ol><hr><h3 id="filebeat-modules" tabindex="-1"><a class="header-anchor" href="#filebeat-modules"><span><strong>Filebeat Modules</strong></span></a></h3><p>Filebeat modules provide preconfigured input, parsing, and visualization for common log sources. Each module contains:</p><ul><li><strong>Fileset</strong>: Defines input configuration.</li><li><strong>Ingest Pipelines</strong>: Preprocess logs in Elasticsearch.</li></ul><h4 id="example-modules" tabindex="-1"><a class="header-anchor" href="#example-modules"><span>Example Modules:</span></a></h4><ol><li><strong>Nginx</strong>: Handles Nginx access and error logs.</li><li><strong>System</strong>: Collects system logs like syslog and authentication logs.</li><li><strong>Kubernetes</strong>: Gathers Kubernetes pod logs and metadata.</li></ol><h4 id="enabling-a-module" tabindex="-1"><a class="header-anchor" href="#enabling-a-module"><span>Enabling a Module:</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">filebeat modules <span class="token builtin class-name">enable</span> nginx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="configuring-a-module" tabindex="-1"><a class="header-anchor" href="#configuring-a-module"><span>Configuring a Module:</span></a></h4><p>Edit the module&#39;s configuration file, typically located in:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line">/etc/filebeat/modules.d/nginx.yml</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="example-filebeat-configuration" tabindex="-1"><a class="header-anchor" href="#example-filebeat-configuration"><span><strong>Example Filebeat Configuration</strong></span></a></h3><p>Hereâ€™s a sample configuration file for Filebeat:</p><h4 id="filebeat-yml" tabindex="-1"><a class="header-anchor" href="#filebeat-yml"><span>filebeat.yml:</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log</span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> /var/log/myapp/<span class="token important">*.log</span></span>
<span class="line">    <span class="token key atrule">multiline</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^[&#39;</span>  <span class="token comment"># Example for multiline logs starting with a timestamp</span></span>
<span class="line">      <span class="token key atrule">negate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">      <span class="token key atrule">match</span><span class="token punctuation">:</span> after</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">processors</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">add_host_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span></span>
<span class="line">  <span class="token punctuation">-</span> <span class="token key atrule">add_cloud_metadata</span><span class="token punctuation">:</span> <span class="token null important">~</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">output.elasticsearch</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http://localhost:9200&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">username</span><span class="token punctuation">:</span> <span class="token string">&quot;elastic&quot;</span></span>
<span class="line">  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;changeme&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token key atrule">setup.kibana</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5601&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="advanced-features-of-filebeat" tabindex="-1"><a class="header-anchor" href="#advanced-features-of-filebeat"><span><strong>Advanced Features of Filebeat</strong></span></a></h3><h4 id="_1-multiline-log-handling" tabindex="-1"><a class="header-anchor" href="#_1-multiline-log-handling"><span>1. <strong>Multiline Log Handling</strong>:</span></a></h4><p>Filebeat can merge log lines based on a pattern, useful for logs like Java stack traces or exceptions.</p><p>Example Configuration:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">multiline</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">pattern</span><span class="token punctuation">:</span> <span class="token string">&#39;^\\[&#39;</span></span>
<span class="line">  <span class="token key atrule">negate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">match</span><span class="token punctuation">:</span> after</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-dynamic-configuration-with-autodiscover" tabindex="-1"><a class="header-anchor" href="#_2-dynamic-configuration-with-autodiscover"><span>2. <strong>Dynamic Configuration with Autodiscover</strong>:</span></a></h4><p>Filebeat autodiscover monitors container environments (Docker, Kubernetes).</p><p>Example for Kubernetes:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">filebeat.autodiscover</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">providers</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> kubernetes</span>
<span class="line">      <span class="token key atrule">node</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>NODE_NAME<span class="token punctuation">}</span></span>
<span class="line">      <span class="token key atrule">templates</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> <span class="token key atrule">condition</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token key atrule">equals</span><span class="token punctuation">:</span></span>
<span class="line">              <span class="token key atrule">kubernetes.labels.app</span><span class="token punctuation">:</span> <span class="token string">&quot;myapp&quot;</span></span>
<span class="line">          <span class="token key atrule">config</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> container</span>
<span class="line">              <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token punctuation">-</span> /var/log/containers/<span class="token important">*-$</span><span class="token punctuation">{</span>data.kubernetes.container.id<span class="token punctuation">}</span>.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-tls-encryption-for-secure-communication" tabindex="-1"><a class="header-anchor" href="#_3-tls-encryption-for-secure-communication"><span>3. <strong>TLS Encryption for Secure Communication</strong>:</span></a></h4><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">output.elasticsearch</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://elasticsearch.mycluster.local:9200&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">username</span><span class="token punctuation">:</span> <span class="token string">&quot;elastic&quot;</span></span>
<span class="line">  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;changeme&quot;</span></span>
<span class="line">  <span class="token key atrule">ssl.certificate_authorities</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/path/to/ca.crt&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-filebeat-and-logstash-integration" tabindex="-1"><a class="header-anchor" href="#_4-filebeat-and-logstash-integration"><span>4. <strong>Filebeat and Logstash Integration</strong>:</span></a></h4><p>When Logstash is used as an intermediate processor:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">output.logstash</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;logstash.mycluster.local:5044&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="monitoring-and-debugging-filebeat" tabindex="-1"><a class="header-anchor" href="#monitoring-and-debugging-filebeat"><span><strong>Monitoring and Debugging Filebeat</strong></span></a></h3><ol><li><p><strong>Enable Monitoring</strong>:</p><ul><li>Use the <code>Monitoring</code> feature in Elastic Stack to view metrics in Kibana.</li><li>Example:<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">monitoring.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"><span class="token key atrule">monitoring.elasticsearch</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;http://localhost:9200&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Run Filebeat in Debug Mode</strong>:</p><ul><li>Start Filebeat in debug mode to troubleshoot issues:<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">filebeat <span class="token parameter variable">-e</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;*&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>Check Logs</strong>:</p><ul><li>Filebeat logs are stored in <code>/var/log/filebeat</code> or configured logging directories.</li></ul></li></ol><hr><h3 id="common-use-cases" tabindex="-1"><a class="header-anchor" href="#common-use-cases"><span><strong>Common Use Cases</strong></span></a></h3><ol><li><strong>Application Log Collection</strong>: <ul><li>Collect logs from application servers and forward them to ELK for analysis.</li></ul></li><li><strong>Cloud and Container Environments</strong>: <ul><li>Use Filebeat for Kubernetes and Docker log shipping with metadata enrichment.</li></ul></li><li><strong>Centralized System Logging</strong>: <ul><li>Gather system logs from multiple servers into a single ELK cluster.</li></ul></li></ol>`,47)])])}const r=s(l,[["render",i]]),c=JSON.parse('{"path":"/blogs/ELK/FilebeatIntroduce.html","title":"Deep Introduction to Filebeat in the ELK","lang":"en-US","frontmatter":{"title":"Deep Introduction to Filebeat in the ELK","date":"2025/10/06","tags":["ELK"],"categories":["ELK"]},"headers":[{"level":3,"title":"Deep Introduction to Filebeat in the ELK","slug":"deep-introduction-to-filebeat-in-the-elk","link":"#deep-introduction-to-filebeat-in-the-elk","children":[]},{"level":3,"title":"Key Features of Filebeat","slug":"key-features-of-filebeat","link":"#key-features-of-filebeat","children":[]},{"level":3,"title":"How Filebeat Fits into the ELK Pipeline","slug":"how-filebeat-fits-into-the-elk-pipeline","link":"#how-filebeat-fits-into-the-elk-pipeline","children":[]},{"level":3,"title":"Key Components of Filebeat","slug":"key-components-of-filebeat","link":"#key-components-of-filebeat","children":[]},{"level":3,"title":"Filebeat Modules","slug":"filebeat-modules","link":"#filebeat-modules","children":[]},{"level":3,"title":"Example Filebeat Configuration","slug":"example-filebeat-configuration","link":"#example-filebeat-configuration","children":[]},{"level":3,"title":"Advanced Features of Filebeat","slug":"advanced-features-of-filebeat","link":"#advanced-features-of-filebeat","children":[]},{"level":3,"title":"Monitoring and Debugging Filebeat","slug":"monitoring-and-debugging-filebeat","link":"#monitoring-and-debugging-filebeat","children":[]},{"level":3,"title":"Common Use Cases","slug":"common-use-cases","link":"#common-use-cases","children":[]}],"git":{"createdTime":1763109587000,"updatedTime":1763109587000,"contributors":[{"name":"jsonzhao","email":"json.zhao.cn@outlook.com","commits":1}]},"filePathRelative":"blogs/ELK/FilebeatIntroduce.md"}');export{r as comp,c as data};
